# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ –¥–µ–±—ä–≥–≤–∞–Ω–µ –Ω–∞ –≥—Ä–µ—à–Ω–∏ —Ü–µ–Ω–∏ –∏ –≤–∞–ª—É—Ç–∞

## –ü—Ä–æ–±–ª–µ–º
–°–∫—Ä–µ–ø–µ—Ä—ä—Ç –∏–∑–≤–ª–∏—á–∞ **–≥—Ä–µ—à–Ω–∏ —Ü–µ–Ω–∏ –∏ –≥—Ä–µ—à–Ω–∞ –≤–∞–ª—É—Ç–∞** –æ—Ç Booking.com:

**–û—á–∞–∫–≤–∞–Ω–∏ —Ü–µ–Ω–∏ (–æ—Ç —Å–∫—Ä–∏–π–Ω—à–æ—Ç –Ω–∞ Booking.com):**
- BGN 544
- BGN 725
- BGN 608
- BGN 811

**–ò–∑–≤–ª–µ—á–µ–Ω–∏ —Ü–µ–Ω–∏ (–æ—Ç —á–∞—Ç–±–æ—Ç):**
- ‚Ç¨422
- ‚Ç¨472
- ‚Ç¨527
- ‚Ç¨573
- ‚Ç¨627

**–ü—Ä–æ–±–ª–µ–º–∏:**
1. ‚ùå –í–∞–ª—É—Ç–∞—Ç–∞ –µ EUR (‚Ç¨) –≤–º–µ—Å—Ç–æ BGN (–ª–≤)
2. ‚ùå –¶–µ–Ω–∏—Ç–µ —Å–∞ –Ω–∞–ø—ä–ª–Ω–æ —Ä–∞–∑–ª–∏—á–Ω–∏

## –†–µ—à–µ–Ω–∏–µ - –î–æ–±–∞–≤–µ–Ω Debug Logging

–î–æ–±–∞–≤–∏—Ö –ø–æ–¥—Ä–æ–±–µ–Ω debug logging –∑–∞ –¥–∞ –≤–∏–¥–∏–º **—Ç–æ—á–Ω–æ –∫–∞–∫–≤–æ –∏–∑–≤–ª–∏—á–∞ —Å–∫—Ä–µ–ø–µ—Ä—ä—Ç** –Ω–∞ –≤—Å—è–∫–∞ —Å—Ç—ä–ø–∫–∞:

### –ö–∞–∫–≤–æ —â–µ –≤–∏–¥–∏—à –≤ –ª–æ–≥–æ–≤–µ—Ç–µ:

```
[extractPriceData] Final price element text: "BGN 544"
[extractPriceData] Extracted currency: BGN from text: BGN 544
[Room 0] Price extraction for "–î–≤–æ–π–Ω–∞ —Å—Ç–∞—è —Å 2 –æ—Ç–¥–µ–ª–Ω–∏ –ª–µ–≥–ª–∞ –∏ –±–∞–ª–∫–æ–Ω": {
  finalPrice: 544,
  basePrice: null,
  currency: 'BGN',
  isDiscounted: false
}
[Room 0] Successfully extracted: "–î–≤–æ–π–Ω–∞ —Å—Ç–∞—è —Å 2 –æ—Ç–¥–µ–ª–Ω–∏ –ª–µ–≥–ª–∞ –∏ –±–∞–ª–∫–æ–Ω" - 544 BGN
```

–ò–ª–∏ –∞–∫–æ –Ω–µ—â–æ –Ω–µ –µ –Ω–∞—Ä–µ–¥:

```
[extractPriceData] Final price element text: "‚Ç¨422"
[extractPriceData] Extracted currency: EUR from text: ‚Ç¨422
[Room 0] Price extraction for "–î–≤–æ–π–Ω–∞ —Å—Ç–∞—è —Å 2 –æ—Ç–¥–µ–ª–Ω–∏ –ª–µ–≥–ª–∞ –∏ –±–∞–ª–∫–æ–Ω": {
  finalPrice: 422,
  basePrice: null,
  currency: 'EUR',
  isDiscounted: false
}
```

## –ö–∞–∫ –¥–∞ —Ç–µ—Å—Ç–≤–∞—à

### –°—Ç—ä–ø–∫–∞ 1: –¢–µ—Å—Ç–≤–∞–π –æ—Ç–Ω–æ–≤–æ —Å—ä—Å —Å—ä—â–∏—è URL

1. –û—Ç–≤–æ—Ä–∏ —á–∞—Ç–±–æ—Ç–∞: https://quendoo-ai-dashboard.web.app
2. –ò–∑–ø—Ä–∞—Ç–∏ —Å—ä—â–∏—è Booking.com URL (–æ—Ç —Å–∫—Ä–∏–π–Ω—à–æ—Ç–∞ —Ç–∏):
   ```
   Scrape: https://www.booking.com/hotel/bg/park-madara.bg.html?checkin=2026-08-15&checkout=2026-08-18&group_adults=2&group_children=0&no_rooms=1
   ```
3. –ò–∑—á–∞–∫–∞–π scraping-a –¥–∞ –∑–∞–≤—ä—Ä—à–∏

### –°—Ç—ä–ø–∫–∞ 2: –ü—Ä–æ–≤–µ—Ä–∏ –ª–æ–≥–æ–≤–µ—Ç–µ

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: Firebase Console (–Ω–∞–π-–ª–µ—Å–µ–Ω)

1. –û—Ç–≤–æ—Ä–∏: https://console.firebase.google.com/project/quendoo-ai-dashboard/functions/logs
2. –ö–ª–∏–∫–Ω–∏ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ `scrapeBooking`
3. –í–∏–∂ –Ω–∞–π-–Ω–æ–≤–∏—Ç–µ –ª–æ–≥–æ–≤–µ
4. –¢—ä—Ä—Å–∏ —Ä–µ–¥–æ–≤–µ –∑–∞–ø–æ—á–≤–∞—â–∏ —Å:
   - `[extractPriceData]` - –ø–æ–∫–∞–∑–≤–∞ –∫–∞–∫—ä–≤ —Ç–µ–∫—Å—Ç –∏–∑–≤–ª–∏—á–∞ –æ—Ç –µ–ª–µ–º–µ–Ω—Ç–∏—Ç–µ
   - `[Room X] Price extraction` - –ø–æ–∫–∞–∑–≤–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—Ç–µ —Ü–µ–Ω–∏ –∏ –≤–∞–ª—É—Ç–∞
   - `[Room X] Successfully extracted` - –ø–æ–∫–∞–∑–≤–∞ —Ñ–∏–Ω–∞–ª–Ω–∏—è —Ä–µ–∑—É–ª—Ç–∞—Ç

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: Firebase CLI

```bash
firebase functions:log --only scrapeBooking --limit 100
```

#### –í–∞—Ä–∏–∞–Ω—Ç –í: Google Cloud Console

```bash
gcloud functions logs read scrapeBooking --region us-central1 --limit 100
```

### –°—Ç—ä–ø–∫–∞ 3: –ê–Ω–∞–ª–∏–∑–∏—Ä–∞–π —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ

**–ê–∫–æ –≤–∏–∂–¥–∞—à –ø—Ä–∞–≤–∏–ª–Ω–∏ —Ü–µ–Ω–∏ –≤ –ª–æ–≥–æ–≤–µ—Ç–µ:**
```
[extractPriceData] Final price element text: "BGN 544"
[extractPriceData] Extracted currency: BGN from text: BGN 544
```

‚úÖ –°–∫—Ä–µ–ø–µ—Ä—ä—Ç –∏–∑–≤–ª–∏—á–∞ **–ø—Ä–∞–≤–∏–ª–Ω–æ** ‚Üí –ø—Ä–æ–±–ª–µ–º—ä—Ç –µ –≤—ä–≤ frontend-a (currency conversion)

**–ê–∫–æ –≤–∏–∂–¥–∞—à –≥—Ä–µ—à–Ω–∏ —Ü–µ–Ω–∏ –≤ –ª–æ–≥–æ–≤–µ—Ç–µ:**
```
[extractPriceData] Final price element text: "‚Ç¨422"
[extractPriceData] Extracted currency: EUR from text: ‚Ç¨422
```

‚ùå –°–∫—Ä–µ–ø–µ—Ä—ä—Ç –∏–∑–≤–ª–∏—á–∞ **–≥—Ä–µ—à–Ω–æ** ‚Üí —Ç—Ä—è–±–≤–∞ –¥–∞ –ø–æ–ø—Ä–∞–≤–∏–º price selectors

## –í—ä–∑–º–æ–∂–Ω–∏ –ø—Ä–∏—á–∏–Ω–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–∏—á–∏–Ω–∞ 1: Scraper-—ä—Ç —Ö–≤–∞—â–∞ "per night" —Ü–µ–Ω–∞—Ç–∞ –≤–º–µ—Å—Ç–æ —Ç–æ—Ç–∞–ª–Ω–∞—Ç–∞

Booking.com –ø–æ–∫–∞–∑–≤–∞:
- **–¶–µ–Ω–∞ –∑–∞ 2 –Ω–æ—â—É–≤–∫–∏:** BGN 544
- **–¶–µ–Ω–∞ –Ω–∞ –Ω–æ—â—É–≤–∫–∞:** BGN 272 (544 / 2)

–ê–∫–æ –≤ –ª–æ–≥–æ–≤–µ—Ç–µ –≤–∏–∂–¥–∞—à:
```
[extractPriceData] Final price element text: "BGN 272"
```

**–†–µ—à–µ–Ω–∏–µ:** Scraper-—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ —Ö–≤–∞—â–∞ —Ç–æ—Ç–∞–ª–Ω–∞—Ç–∞ —Ü–µ–Ω–∞, –Ω–µ —Ü–µ–Ω–∞—Ç–∞ –Ω–∞ –Ω–æ—â—É–≤–∫–∞.

### –ü—Ä–∏—á–∏–Ω–∞ 2: Scraper-—ä—Ç —Ö–≤–∞—â–∞ –¥—Ä—É–≥ price element

Booking.com –∏–º–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ü–µ–Ω–æ–≤–∏ –µ–ª–µ–º–µ–Ω—Ç–∏:
- –°—Ç–∞—Ä–∞ —Ü–µ–Ω–∞ (–∑–∞—á–µ—Ä–∫–Ω–∞—Ç–∞)
- –ù–æ–≤–∞ —Ü–µ–Ω–∞ (—Å –æ—Ç—Å—Ç—ä–ø–∫–∞)
- –¶–µ–Ω–∞ –∑–∞ 2 –Ω–æ—â—É–≤–∫–∏
- –¶–µ–Ω–∞ –Ω–∞ –Ω–æ—â—É–≤–∫–∞
- –î–∞–Ω—ä—Ü–∏ –∏ —Ç–∞–∫—Å–∏

–ê–∫–æ –≤ –ª–æ–≥–æ–≤–µ—Ç–µ –≤–∏–∂–¥–∞—à –Ω–µ–æ—á–∞–∫–≤–∞–Ω–∞ —Ü–µ–Ω–∞, –∑–Ω–∞—á–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä—ä—Ç —Ö–≤–∞—â–∞ –≥—Ä–µ—à–Ω–∏—è –µ–ª–µ–º–µ–Ω—Ç.

**–†–µ—à–µ–Ω–∏–µ:** –¢—Ä—è–±–≤–∞ –¥–∞ –æ–±–Ω–æ–≤–∏–º price selectors –¥–∞ —Ö–≤–∞—â–∞—Ç –ø—Ä–∞–≤–∏–ª–Ω–∏—è –µ–ª–µ–º–µ–Ω—Ç.

### –ü—Ä–∏—á–∏–Ω–∞ 3: Currency detection —Ö–≤–∞—â–∞ –≥—Ä–µ—à–Ω–∞ –≤–∞–ª—É—Ç–∞

–ê–∫–æ –≤ –ª–æ–≥–æ–≤–µ—Ç–µ –≤–∏–∂–¥–∞—à:
```
[extractPriceData] Extracted currency: EUR from text: ‚Ç¨422
```

–ù–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞ –ø–æ–∫–∞–∑–≤–∞ BGN, –∑–Ω–∞—á–∏:
- Booking.com –ø–æ–∫–∞–∑–≤–∞ EUR —Ü–µ–Ω–∏ (–º–æ–∂–µ –¥–∞ –µ –∏–∑–±—Ä–∞–Ω–∞ EUR –≤–∞–ª—É—Ç–∞ –≤ URL)
- Currency detection logic —Ä–∞–±–æ—Ç–∏ –ø—Ä–∞–≤–∏–ª–Ω–æ, –Ω–æ –∏–∑–≤–ª–∏—á–∞ EUR –∑–∞—â–æ—Ç–æ —Ç–æ–≤–∞ –µ –≤ HTML-a

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ URL-a –∏–º–∞ currency parameter
2. –î–æ–±–∞–≤–∏ `?selected_currency=BGN` –∫—ä–º URL-a
3. –ò–ª–∏ –¥–æ–±–∞–≤–∏ fallback logic –∑–∞ –ë—ä–ª–≥–∞—Ä–∏—è ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ BGN

### –ü—Ä–∏—á–∏–Ω–∞ 4: Frontend currency conversion –µ –≥—Ä–µ—à–Ω–∞

–ê–∫–æ –≤ –ª–æ–≥–æ–≤–µ—Ç–µ –≤–∏–∂–¥–∞—à –ø—Ä–∞–≤–∏–ª–Ω–∏ BGN —Ü–µ–Ω–∏, –Ω–æ frontend-—ä—Ç –ø–æ–∫–∞–∑–≤–∞ EUR:
- Scraper-—ä—Ç —Ä–∞–±–æ—Ç–∏ **–ø—Ä–∞–≤–∏–ª–Ω–æ**
- –ü—Ä–æ–±–ª–µ–º—ä—Ç –µ –≤—ä–≤ `useCurrencyRates` composable –∏–ª–∏ `ScraperProgress.vue`

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏ frontend currency conversion logic.

## Debug Checklist

–°–ª–µ–¥ scraping, –ø—Ä–æ–≤–µ—Ä–∏ –≤ –ª–æ–≥–æ–≤–µ—Ç–µ:

- [ ] –ö–æ–ª–∫–æ room blocks —Å–∞ –Ω–∞–º–µ—Ä–µ–Ω–∏: `[Scraper] Initial query found X room blocks`
- [ ] –ü—Ä–∞–≤–∏–ª–Ω–∏ –ª–∏ —Å–∞ room names: `[Room 0] Found room name "..." via selector: ...`
- [ ] –ö–∞–∫—ä–≤ –µ raw price text: `[extractPriceData] Final price element text: "..."`
- [ ] –ö–∞–∫–≤–∞ –≤–∞–ª—É—Ç–∞ –µ –∏–∑–≤–ª–µ—á–µ–Ω–∞: `[extractPriceData] Extracted currency: ...`
- [ ] –ü—Ä–∞–≤–∏–ª–Ω–∏ –ª–∏ —Å–∞ —á–∏—Å–ª–∞—Ç–∞: `finalPrice: 544` vs `finalPrice: 422`
- [ ] –§–∏–Ω–∞–ª–µ–Ω —Ä–µ–∑—É–ª—Ç–∞—Ç: `[Room 0] Successfully extracted: "..." - X BGN`

## –°–ª–µ–¥–≤–∞—â–∏ —Å—Ç—ä–ø–∫–∏

–°–ª–µ–¥ –∫–∞—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏–º –ª–æ–≥–æ–≤–µ—Ç–µ, —â–µ –≤–∏–¥–∏–º —Ç–æ—á–Ω–æ –∫—ä–¥–µ –µ –ø—Ä–æ–±–ª–µ–º—ä—Ç –∏ —â–µ –Ω–∞–ø—Ä–∞–≤–∏–º —Ü–µ–ª–µ–Ω–∞—Å–æ—á–µ–Ω–∞ –∫–æ—Ä–µ–∫—Ü–∏—è.

**–ò–∑–ø—Ä–∞—Ç–∏ –º–∏:**
1. Screenshot –∏–ª–∏ copy-paste –Ω–∞ –ª–æ–≥–æ–≤–µ—Ç–µ (–æ—Å–æ–±–µ–Ω–æ `[extractPriceData]` –∏ `[Room X] Price extraction` —Ä–µ–¥–æ–≤–µ—Ç–µ)
2. URL-a –∫–æ–π—Ç–æ —Å–∏ –∏–∑–ø–æ–ª–∑–≤–∞–ª –∑–∞ scraping
3. –ö–∞–∫–≤–æ –≤–∏–∂–¥–∞—à –≤—ä–≤ frontend (screenshot)

–¢–∞–∫–∞ —â–µ –º–æ–≥–∞ –¥–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–∞–º —Ç–æ—á–Ω–æ –∫—ä–¥–µ –µ –≥—Ä–µ—à–∫–∞—Ç–∞ –∏ –¥–∞ —è –ø–æ–ø—Ä–∞–≤—è –±—ä—Ä–∑–æ.

---

**–î–µ–ø–ª–æ–π–Ω–∞—Ç–æ:** 2026-01-24 (—Ç–µ–∫—É—â–∞ —Å–µ—Å–∏—è)
**URL:** https://scrapebooking-4fa3yy3ovq-uc.a.run.app
**–°—Ç–∞—Ç—É—Å:** üü° –û—á–∞–∫–≤–∞–º–µ test results –æ—Ç –ª–æ–≥–æ–≤–µ—Ç–µ
